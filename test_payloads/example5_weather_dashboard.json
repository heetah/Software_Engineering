{
  "output": {
    "coder_instructions": {
      "task": "Build a weather dashboard web application",
      "requirements": "Display current weather and 5-day forecast. Users can search cities, save favorite locations, switch between Celsius/Fahrenheit. Show weather icons, temperature, humidity, wind speed. Responsive design with dark/light theme toggle.",
      
      "projectConfig": {
        "backend": {
          "host": "localhost",
          "port": 5000,
          "protocol": "http"
        },
        "frontend": {
          "apiBaseUrl": "/api"
        },
        "externalApis": {
          "openweather": {
            "note": "Uses OpenWeatherMap API (requires API key)",
            "mockData": true
          }
        }
      },
      
      "files": [
        {
          "path": "index.html",
          "type": "html",
          "description": "Weather dashboard interface with search bar, current weather display card, 5-day forecast grid, favorite cities list sidebar, theme toggle button, and unit switch (C/F). Uses semantic HTML5 with accessible ARIA labels.",
          "dependencies": ["styles.css", "app.js", "config.js"]
        },
        {
          "path": "styles.css",
          "type": "css",
          "description": "Modern styling with CSS variables for theming (light/dark mode). Weather card with gradient background based on conditions (sunny=yellow/orange, rainy=blue/gray, cloudy=gray, snowy=white/blue). Responsive grid for forecast. Sidebar for favorites. Smooth transitions for theme switching.",
          "dependencies": []
        },
        {
          "path": "app.js",
          "type": "javascript",
          "description": "Frontend logic: search city weather, display current conditions with icon, render 5-day forecast, save/remove favorite cities (localStorage), toggle theme (localStorage), switch temperature units, fetch weather from backend API, handle loading states and errors, update UI dynamically.",
          "dependencies": ["config.js"]
        },
        {
          "path": "server.py",
          "type": "python",
          "description": "Flask backend with API endpoints: GET /api/weather?city=<name> (current weather), GET /api/forecast?city=<name> (5-day forecast), GET /api/favorites (user favorites - mock). Returns mock weather data with realistic values. Includes CORS support and static file serving.",
          "dependencies": []
        }
      ],
      
      "contracts": {
        "api": [
          {
            "endpoint": "GET /api/weather",
            "description": "Get current weather for a city",
            "request": {
              "query": {
                "city": "string (required) - city name"
              }
            },
            "response": {
              "city": "string",
              "country": "string",
              "temperature": "number (Celsius)",
              "feels_like": "number (Celsius)",
              "humidity": "number (percentage)",
              "wind_speed": "number (m/s)",
              "description": "string (e.g., 'clear sky', 'light rain')",
              "icon": "string (weather condition code: 'clear', 'clouds', 'rain', 'snow', 'storm')",
              "timestamp": "string (ISO 8601)"
            },
            "producers": ["server.py"],
            "consumers": ["app.js"]
          },
          {
            "endpoint": "GET /api/forecast",
            "description": "Get 5-day weather forecast",
            "request": {
              "query": {
                "city": "string (required) - city name"
              }
            },
            "response": {
              "city": "string",
              "country": "string",
              "forecast": [
                {
                  "date": "string (YYYY-MM-DD)",
                  "day_name": "string (e.g., 'Monday')",
                  "temperature_high": "number (Celsius)",
                  "temperature_low": "number (Celsius)",
                  "description": "string",
                  "icon": "string (weather condition code)",
                  "humidity": "number (percentage)",
                  "wind_speed": "number (m/s)"
                }
              ]
            },
            "producers": ["server.py"],
            "consumers": ["app.js"]
          }
        ],
        "dom": [
          {
            "description": "Search and current weather display",
            "requiredElements": [
              {
                "selector": "#city-search-input",
                "element": "input",
                "purpose": "City name input field",
                "attributes": { "type": "text", "placeholder": "Search city..." }
              },
              {
                "selector": "#search-btn",
                "element": "button",
                "purpose": "Trigger city search"
              },
              {
                "selector": "#current-weather",
                "element": "div",
                "purpose": "Container for current weather display"
              },
              {
                "selector": "#weather-icon",
                "element": "div",
                "purpose": "Weather icon container"
              },
              {
                "selector": "#temperature",
                "element": "span",
                "purpose": "Current temperature display"
              },
              {
                "selector": "#city-name",
                "element": "h2",
                "purpose": "City name display"
              },
              {
                "selector": "#weather-description",
                "element": "p",
                "purpose": "Weather description (e.g., 'clear sky')"
              },
              {
                "selector": "#humidity",
                "element": "span",
                "purpose": "Humidity percentage"
              },
              {
                "selector": "#wind-speed",
                "element": "span",
                "purpose": "Wind speed"
              }
            ],
            "consumers": ["app.js"]
          },
          {
            "description": "5-day forecast display",
            "requiredElements": [
              {
                "selector": "#forecast-container",
                "element": "div",
                "purpose": "Container for 5-day forecast cards"
              }
            ],
            "consumers": ["app.js"]
          },
          {
            "description": "Favorites and settings",
            "requiredElements": [
              {
                "selector": "#favorites-list",
                "element": "ul",
                "purpose": "List of favorite cities"
              },
              {
                "selector": "#add-favorite-btn",
                "element": "button",
                "purpose": "Add current city to favorites"
              },
              {
                "selector": "#theme-toggle",
                "element": "button",
                "purpose": "Toggle dark/light theme"
              },
              {
                "selector": "#unit-toggle",
                "element": "button",
                "purpose": "Toggle Celsius/Fahrenheit"
              },
              {
                "selector": "#loading-spinner",
                "element": "div",
                "purpose": "Loading indicator"
              },
              {
                "selector": "#error-message",
                "element": "div",
                "purpose": "Error message display"
              }
            ],
            "consumers": ["app.js"]
          }
        ],
        "storage": [
          {
            "key": "weather_favorites",
            "type": "localStorage",
            "schema": {
              "type": "array",
              "items": {
                "city": "string",
                "country": "string",
                "addedAt": "string (ISO 8601)"
              }
            },
            "readers": ["app.js"],
            "writers": ["app.js"]
          },
          {
            "key": "weather_theme",
            "type": "localStorage",
            "schema": {
              "type": "string",
              "values": ["light", "dark"]
            },
            "readers": ["app.js"],
            "writers": ["app.js"]
          },
          {
            "key": "weather_unit",
            "type": "localStorage",
            "schema": {
              "type": "string",
              "values": ["celsius", "fahrenheit"]
            },
            "readers": ["app.js"],
            "writers": ["app.js"]
          }
        ]
      },

      "setup": {
        "runtime": "python",
        "pythonVersion": "3.8+",
        "dependencies": {
          "python": ["flask==3.0.0", "flask-cors==4.0.0"]
        },
        "environmentVariables": {
          "FLASK_APP": "server.py",
          "FLASK_ENV": "development",
          "PORT": "5000"
        },
        "startCommands": {
          "backend": "python server.py",
          "frontend": "Open index.html in browser"
        },
        "instructions": "1. Install Python dependencies: pip install -r requirements.txt\n2. Start Flask server: python server.py\n3. Open index.html in browser at http://localhost:5000\n4. Search for cities to view weather and 5-day forecast\n5. Add cities to favorites for quick access\n6. Toggle theme and temperature units as needed"
      }
    }
  }
}
